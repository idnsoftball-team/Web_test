<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>光復國小桌球隊</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
  
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>
  
  <meta name="theme-color" content="#0054a6">
</head>
<body>
  <div id="app-loader" style="position:fixed; top:0; left:0; width:100%; height:100%; background:var(--primary-gradient, #0054a6); z-index:9999; display:flex; flex-direction:column; align-items:center; justify-content:center; color:white; transition: opacity 0.5s;">
    <i class="fas fa-table-tennis fa-spin" style="font-size:3rem; margin-bottom:1rem;"></i>
    <h2 style="font-size:1.5rem; font-weight:700;">光復桌球</h2>
    <p>資料同步中...</p>
  </div>

  
  <div class="bg-mesh"></div>

  <header> 
    <h1><i class="fas fa-table-tennis"></i> 光復桌球</h1>
    <div class="header-actions">
        <button id="back-button" class="hidden"><i class="fas fa-arrow-left"></i></button>
        <button id="menu-toggle"><i class="fas fa-bars"></i></button>
    </div>
  </header>

  <nav id="sidebar">
    <ul>
      <li><a href="#" data-section="home" class="active"><i class="fas fa-home"></i> 首頁</a></li>
      <li><a href="#" data-section="announcements"><i class="fas fa-bullhorn"></i> 公告</a></li>
      <li><a href="#" data-section="schedule"><i class="fas fa-calendar-alt"></i> 訓練排程</a></li>
      <li><a href="#" data-section="leave"><i class="fas fa-paper-plane"></i> 請假</a></li>
      <li><a href="#" data-section="matches"><i class="fas fa-trophy"></i> 比賽紀錄</a></li>
      <li><a href="#" data-section="roster"><i class="fas fa-users"></i> 名冊</a></li>
      <li><a href="#" data-section="media"><i class="fas fa-video"></i> 影音區</a></li>
      <li><a href="#" data-section="admin"><i class="fas fa-cog"></i> 管理模式</a></li>
    </ul>
  </nav>

  <main> 
    <section id="home" class="active">
      <div class="hero-section">
        <div class="hero-bg-placeholder"></div>
        <div class="hero-content">
          <div class="hero-title">光復國小桌球隊</div>
          <div class="hero-subtitle">Focus & Fight</div>
          <button class="hero-btn" id="hero-btn">最新賽程 <i class="fas fa-arrow-right"></i></button>
        </div>
      </div>

      <h3 class="section-title section-link-title" onclick="navigateTo('announcements')">
        最新動態 <i class="fas fa-chevron-right"></i>
      </h3>
      <div id="home-announcements" class="card-container"></div>

      <h3 class="section-title" style="margin-top:20px;">今日概況 (請假)</h3>
      <div id="home-leave-overview" class="card-container">
          </div>
    </section>

    <section id="announcements" class="hidden">
        <h2>公告中心</h2>
        <div id="announcement-list" class="card-container"></div>
    </section>

    <section id="schedule" class="hidden">
      <h2>訓練排程</h2>
      <div class="filter-bar" style="margin-bottom:15px;">
        <input type="text" id="schedule-search" placeholder="搜尋學生姓名..." style="width:100%; padding:10px; border-radius:8px; border:1px solid #ddd;">
      </div>
      <div id="schedule-container" class="scrollable">
        </div>
    </section>

    <section id="leave" class="hidden">
        <h2>線上請假</h2>
        <div class="card">
            <form id="leave-form">
                <label style="display:block; margin-bottom:10px;">姓名 <input type="text" id="leave-name" required style="width:100%; padding:8px; border:1px solid #ddd; border-radius:6px; margin-top:5px;"></label>
                <label style="display:block; margin-bottom:10px;">日期 <input type="date" id="leave-date" required style="width:100%; padding:8px; border:1px solid #ddd; border-radius:6px; margin-top:5px;"></label>
                <label style="display:block; margin-bottom:10px;">時段 
                    <select id="leave-slot" style="width:100%; padding:8px; border:1px solid #ddd; border-radius:6px; margin-top:5px;">
                    <option value="17:00-18:00">17:00-18:00</option>
                    <option value="18:00-19:00">18:00-19:00</option>
                    <option value="19:00-20:00">19:00-20:00</option>
                    </select>
                </label>
                <label style="display:block; margin-bottom:10px;">原因 <textarea id="leave-reason" style="width:100%; padding:8px; border:1px solid #ddd; border-radius:6px; margin-top:5px;"></textarea></label>
                <button type="submit" class="hero-btn" style="width:100%;">送出請假</button>
            </form>
        </div>
        <h3 style="margin-top:20px;">我的紀錄</h3>
        <div id="leave-list"></div>
        <button id="delete-selected-leave" class="hero-btn" style="background:#e74c3c; color:white; margin-top:10px;" disabled>刪除選取</button>
    </section>

    <section id="matches" class="hidden">
        <h2>比賽紀錄</h2>

        <div class="multi-filter-bar">
            <div class="filter-row">
                <input type="text" id="match-keyword" class="filter-search-input" placeholder="搜尋選手姓名...">
            </div>
            <div class="filter-row">
                <label class="filter-checkbox-label">
                    <input type="checkbox" id="filter-singles" value="singles" checked>
                    <span>單打</span>
                </label>
                <label class="filter-checkbox-label">
                    <input type="checkbox" id="filter-doubles" value="doubles" checked>
                    <span>雙打</span>
                </label>
            </div>
        </div>

        <div id="match-list" class="card-container"></div>

        <div id="player-analysis" class="card hidden" style="margin-top:20px; position:relative;"></div>
    </section>

    <section id="roster" class="hidden">
        <h2>教練與球員</h2>
        <input type="text" id="roster-search" class="roster-search-bar" placeholder="搜尋姓名或背號..." oninput="renderRoster()">
        <div id="roster-staff" class="card-container" style="margin-bottom:20px;"></div>
        <div id="roster-players" class="card-container"></div>
    </section>

    <section id="media" class="hidden">
        <h2>影音專區</h2>
        <div id="media-list" class="video-grid"></div>
    </section>

    <section id="admin" class="hidden">
        <h2>管理員後台</h2>
        <div id="admin-login" class="card">
            <h3>系統登入</h3>
            <input type="password" id="admin-password" placeholder="輸入管理密碼">
            <button id="admin-login-btn">登入</button>
            <p id="admin-login-error" class="error hidden">密碼錯誤</p>
        </div>
        <div id="admin-dashboard" class="hidden">
            <div class="card">
                <h3>功能選單</h3>
                <div class="admin-actions" style="display:flex; gap:10px; flex-wrap:wrap;">
                    <button id="admin-add-announcement" class="hero-btn" style="font-size:0.9rem;">新增公告</button>
                    <button id="admin-view-leave" class="hero-btn" style="font-size:0.9rem;">查看請假紀錄</button>
                    <button id="admin-manage-schedule" class="hero-btn" style="font-size:0.9rem;">管理排程</button>
                    <button id="admin-settings" class="hero-btn" style="font-size:0.9rem;" onclick="showAdminSettings()">網站外觀設定</button>
                </div>
            </div>
            <div id="admin-content" style="margin-top:20px;"></div>
        </div>
    </section>
  </main>

  <div id="overlay"></div>
  <div id="announcement-detail" class="modal"></div>

  <button id="back-to-top" onclick="window.scrollTo({top:0, behavior:'smooth'})"><i class="fas fa-arrow-up"></i></button>

  <nav id="bottom-nav">
    <button data-section="home" class="active"><i class="fas fa-home"></i> 首頁</button>
    <button data-section="schedule"><i class="fas fa-calendar-check"></i> 排程</button>
    <button data-section="leave"><i class="fas fa-clock"></i> 請假</button>
    <button data-section="matches"><i class="fas fa-medal"></i> 紀錄</button>
    <button data-section="media"><i class="fas fa-video"></i> 影音</button>
  </nav>

<div id="toast-container"></div>

  <script src="script.js"></script>
</body>
</html>